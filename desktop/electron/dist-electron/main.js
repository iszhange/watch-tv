"use strict";const e=require("electron"),c=require("path"),d={apiHost:"http:localhost:81"};async function p(n){const t=new URLSearchParams;Object.entries(n).forEach(([o,a])=>{t.append(o,a)});const r=new URL(d.apiHost+"/countries");r.search=t.toString();const i=e.net.request({method:"GET",url:r.toString()});let s="";i.on("response",o=>{o.on("data",a=>{s+=a}),o.on("end",()=>s)}),i.end()}const l=()=>{const n=new e.BrowserWindow({width:800,webPreferences:{preload:c.join(__dirname,"../dist-electron/preload.js")}});if(e.app.isPackaged)n.loadFile(c.join(__dirname,"../index.html"));else{let t="http://localhost:3000";n.loadURL(t)}};e.app.whenReady().then(()=>{e.ipcMain.handle("net:api:countries",(n,t)=>p(t)),l(),e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&l()})});e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});
