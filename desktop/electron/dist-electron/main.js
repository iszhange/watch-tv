"use strict";const e=require("electron"),l=require("path"),d={apiHost:"http:localhost:81"};async function p(n){const o=new URLSearchParams;Object.entries(n).forEach(([t,s])=>{o.append(t,s)});const a=new URL(d.apiHost+"/countries");a.search=o.toString();const r=e.net.request({method:"GET",url:a.toString()});let i="";r.on("response",t=>{console.log(`STATUS: ${t.statusCode}`),console.log(`HEADERS: ${JSON.stringify(t.headers)}`),t.on("data",s=>{console.log(`BODY: ${s}`),i+=s}),t.on("end",()=>(console.log("No more data in response."),i))}),r.end()}const c=()=>{const n=new e.BrowserWindow({width:800,webPreferences:{preload:l.join(__dirname,"../dist-electron/preload.js")}});if(e.app.isPackaged)n.loadFile(l.join(__dirname,"../index.html"));else{let o="http://localhost:3000";n.loadURL(o)}};e.app.whenReady().then(()=>{e.session.defaultSession.webRequest.onHeadersReceived((n,o)=>{o({responseHeaders:{...n.responseHeaders,"Content-Security-Policy":"*"}})}),e.ipcMain.handle("net:api:countries",(n,o)=>p(o)),c(),e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&c()})});e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});
